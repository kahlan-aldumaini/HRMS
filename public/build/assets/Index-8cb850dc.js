import{A as D}from"./AppLayout-e055a3fb.js";import{_ as M,I as V}from"./_plugin-vue_export-helper-d97591f4.js";import{_ as G,M as N,F as I,S as j,D as U,L as K}from"./FormDropDown-d545c5d5.js";import{T as R,O as q,k as h,r as a,o as l,c as p,b as d,f as r,g as u,a as e,h as z,w as _,p as E,t as c,F as g,l as f,d as w,e as m,i as T}from"./app-65af30ef.js";import{_ as J}from"./BlueButton-a8ab83bf.js";import{a as P,D as Q}from"./DropdownList-9b3ede74.js";import{S as W}from"./ShowModel-4bc20b91.js";import{F as X}from"./Filter-7e2e6f35.js";const Y={components:{TableCard:G,Icon:V,BlueButton:J,DropdownList:P,DropDownOption:Q,Model:N,FormDropDown:I,ShowModel:W,Filter:X,SecondaryButton:j,DangerButton:U},props:{fingerprints:Array,filter:Object},created(){this.getEmployees()},data(){return{showAddNew:!1,employees:[],currentEmp:"",Vactions:[],groups:[],currentVacation:"",currentGroup:"",newEmpFingerprint:R({employee:"",hours:"",login:"",exit:"",type:"",vaction:"",group:"",shift_id:""}),showTask:!1,editId:0,shifts:[],taskData:null,showFilter:!1,loadingClearFilter:!1,filterKeys:["group","from_date","to_date"],filterData:this.filter}},watch:{"newEmpFingerprint.type":function(n){this.getVacations(),n=="employee"?this.getEmployees():n=="group"&&this.getGroup()}},methods:{hideFilter(){this.showFilter=!1},filterSuccess(){this.toast("","تم فلترة التكاليف بنجاح"),this.hideFilter()},clearFilter(){this.loadingClearFilter=!0,q.get("/tasks",{},{onSuccess:()=>{this.toast("","تم تصفية فلتر التكاليف بنجاح"),this.loadingClearFilter=!1}})},hideModel(){this.showAddNew=!1},getEmployees(){h.get("/get-employees").then(n=>{this.employees=n.data}).catch(n=>console.log(n))},async selectFun(n){this.currentEmp=n.user.name,this.newEmpFingerprint.employee=n.id,this.getVacations(),await this.getShiftByGroupOrEmployee(n.id)},submit(){this.newEmpFingerprint.post("/add-new-task",{onSuccess:()=>{this.showAddNew=!1,this.toast("","تمت اظافة التكليف بنجاح")},onError:n=>{n.message&&this.toast("",n.message,"error")}})},getVacations(){this.newEmpFingerprint.type=="employee"?h.get("/get-tasks-for-emp/"+this.newEmpFingerprint.employee).then(n=>{this.Vactions=n.data}).catch(n=>console.log(n)):h.get("/get-tasks/").then(n=>{this.Vactions=n.data}).catch(n=>console.log(n))},getGroup(){h.get("/get-groups").then(n=>{this.groups=n.data}).catch(n=>console.log(n))},async getShiftByGroupOrEmployee(n=0){await h.get("/get-shift?id="+n+"&type="+this.newEmpFingerprint.type).then(o=>{this.shifts=o.data})},async showTaskFunction(n){this.showTask=!0,this.editId=n,await h.get("/get-task/"+this.editId).then(o=>{this.taskData=o.data})},hideShowTaskModel(){this.showTask=!1,this.editId=0,this.taskData=null}}},Z={class:"w-full mb-4"},$=e("span",{class:"block mb-4 mr-4 text-sm font-semibold"},"نوع الاجازة",-1),ee={class:"flex items-center justify-evenly"},te={class:"flex items-center px-4"},se=e("span",{class:"mr-2"}," موظف محدد ",-1),ne={class:"flex items-center px-4"},oe=e("span",{class:"mr-2"},"مجموعة محدده",-1),re={class:"flex items-center px-4"},le=e("span",{class:"mr-2"},"كل الموظف",-1),ie={class:"grid w-full grid-cols-2 gap-2"},pe={key:0,class:"block w-full mb-4"},ce=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"اسم الموظف",-1),de={class:"px-2 border rounded-md"},ae={class:"px-1"},ue=["innerHTML"],me={class:"block w-full mb-4"},he=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"التكاليف",-1),_e={class:"px-2 border rounded-md"},ge={class:"px-1"},fe=["innerHTML"],we={key:1,class:"block w-full mb-4"},be=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"المجموعة",-1),ye={class:"px-2 border rounded-md"},xe={class:"px-1"},Fe=["innerHTML"],ke={class:"block w-full mb-4"},Ee=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"تاريخ البدء",-1),ve={class:"flex items-center px-4 border rounded-md"},De=["innerHTML"],Te={class:"block w-full mb-4"},Me=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"تاريخ الانتهاء",-1),Ve={class:"flex items-center px-4 border rounded-md"},Ce=["innerHTML"],Se={class:"flex items-center justify-between w-full py-2"},Le={class:"flex items-center justify-between w-full"},Be=e("p",{class:"text-xl font-semibold"},"عرض التكاليف",-1),He={class:"grid grid-cols-3 gap-2"},Oe=e("th",null,"الاسم",-1),Ae=e("th",{class:"py-2"},"رقم الكود",-1),Ge=e("th",null,"نوع التكاليف",-1),Ne=e("th",null,"تاريخ البدء",-1),Ie=e("th",null,"تاريخ الانتهاء",-1),je=e("th",null,"حالة التكليف",-1),Ue=e("th",null,"خيارات",-1),Ke=["onClick"];function Re(n,o,b,C,t,i){const y=a("Filter"),x=a("DropDownOption"),F=a("DropdownList"),S=a("FormDropDown"),v=a("BlueButton"),L=a("Model"),B=a("ShowModel"),H=a("secondary-button"),O=a("danger-button"),A=a("TableCard");return l(),p(g,null,[d(y,{show:t.showFilter,filter:t.filterData,hide:i.hideFilter,url:"/tasks",success:i.filterSuccess,only:t.filterKeys},{header:r(()=>[u(" فلتر التكاليف ")]),_:1},8,["show","filter","hide","success","only"]),d(L,{hide:i.hideModel,show:t.showAddNew},{title:r(()=>[u(" اظافة تكليف ")]),default:r(()=>[e("form",{onSubmit:o[7]||(o[7]=z((...s)=>i.submit&&i.submit(...s),["prevent"])),class:"px-2 w-[500px]"},[e("div",Z,[$,e("div",ee,[e("label",te,[_(e("input",{type:"radio",value:"employee",name:"type","onUpdate:modelValue":o[0]||(o[0]=s=>t.newEmpFingerprint.type=s),class:"pr-1 text-sm bg-transparent border focus:ring-0"},null,512),[[E,t.newEmpFingerprint.type]]),se]),e("label",ne,[_(e("input",{type:"radio",value:"group",name:"type","onUpdate:modelValue":o[1]||(o[1]=s=>t.newEmpFingerprint.type=s),class:"pr-1 text-sm bg-transparent border focus:ring-0 text-primary"},null,512),[[E,t.newEmpFingerprint.type]]),oe]),e("label",re,[_(e("input",{onChange:o[2]||(o[2]=s=>i.getShiftByGroupOrEmployee(0)),type:"radio",value:"all",name:"type","onUpdate:modelValue":o[3]||(o[3]=s=>t.newEmpFingerprint.type=s),class:"pr-1 text-sm bg-transparent border focus:ring-0 text-primary"},null,544),[[E,t.newEmpFingerprint.type]]),le])])]),e("div",ie,[t.newEmpFingerprint.type=="employee"?(l(),p("label",pe,[ce,e("div",de,[d(F,null,{button:r(()=>[e("div",ae,c(t.currentEmp),1)]),items:r(()=>[(l(!0),p(g,null,f(t.employees,s=>(l(),w(x,{class:"hover:bg-blue-500",key:s.id,select:k=>i.selectFun(s)},{default:r(()=>[u(c(s.user.name),1)]),_:2},1032,["select"]))),128))]),_:1})]),t.newEmpFingerprint.errors.employee!=null?(l(),p("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.employee},null,8,ue)):m("",!0)])):m("",!0),e("label",me,[he,e("div",_e,[d(F,null,{button:r(()=>[e("div",ge,c(t.currentVacation),1)]),items:r(()=>[(l(!0),p(g,null,f(t.Vactions,s=>(l(),w(x,{class:"hover:bg-blue-500",key:s.id,select:k=>{t.newEmpFingerprint.vaction=s.id,t.currentVacation=s.name}},{default:r(()=>[u(c(s.name),1)]),_:2},1032,["select"]))),128))]),_:1})]),t.newEmpFingerprint.errors.employee!=null?(l(),p("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.employee},null,8,fe)):m("",!0)]),t.newEmpFingerprint.type=="group"?(l(),p("label",we,[be,e("div",ye,[d(F,null,{button:r(()=>[e("div",xe,c(t.currentGroup),1)]),items:r(()=>[(l(!0),p(g,null,f(t.groups,s=>(l(),w(x,{class:"hover:bg-blue-500",key:s.id,select:k=>{t.newEmpFingerprint.group=s.id,t.currentGroup=s.name,i.getShiftByGroupOrEmployee(s.id)}},{default:r(()=>[u(c(s.name),1)]),_:2},1032,["select"]))),128))]),_:1})]),t.newEmpFingerprint.errors.group!=null?(l(),p("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.group},null,8,Fe)):m("",!0)])):m("",!0),e("label",ke,[Ee,e("div",ve,[_(e("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=s=>t.newEmpFingerprint.login=s),class:"pr-1 text-sm bg-transparent border-0 focus:ring-0"},null,512),[[T,t.newEmpFingerprint.login]])]),t.newEmpFingerprint.errors.login!=null?(l(),p("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.login},null,8,De)):m("",!0)]),e("label",Te,[Me,e("div",Ve,[_(e("input",{type:"date","onUpdate:modelValue":o[5]||(o[5]=s=>t.newEmpFingerprint.exit=s),class:"pr-1 text-sm bg-transparent border-0 focus:ring-0"},null,512),[[T,t.newEmpFingerprint.exit]])]),t.newEmpFingerprint.errors.exit!=null?(l(),p("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.exit},null,8,Ce)):m("",!0)])]),d(S,{label:"الدوام",modelValue:t.newEmpFingerprint.shift_id,error:t.newEmpFingerprint.errors.shift_id,selectData:t.shifts,selectFun:s=>t.newEmpFingerprint.shift_id=s},null,8,["modelValue","error","selectData","selectFun"]),e("div",Se,[d(v,{type:"submit"},{default:r(()=>[u(" حفظ ")]),_:1}),e("button",{type:"reset",onClick:o[6]||(o[6]=(...s)=>i.hideModel&&i.hideModel(...s)),class:"w-full py-2 mx-2 text-sm font-semibold text-white bg-red-500 rounded-full"}," الغاء ")])],32)]),_:1},8,["hide","show"]),d(B,{show:t.showTask,title:"عرض التكليف",items:t.taskData,hide:i.hideShowTaskModel},null,8,["show","items","hide"]),d(A,null,{header:r(()=>[e("div",Le,[Be,e("div",He,[t.employees.length?(l(),w(v,{key:0,onClick:o[8]||(o[8]=s=>{t.showAddNew=!0,i.getEmployees()}),class:"px-4 py-1"},{default:r(()=>[u(" اظافة تكليف ")]),_:1})):m("",!0),d(H,{onClick:o[9]||(o[9]=s=>t.showFilter=!0)},{default:r(()=>[u(" فلتر ")]),_:1}),d(O,{loading:t.loadingClearFilter,onClick:i.clearFilter},{default:r(()=>[u(" تصفية الفلتر ")]),_:1},8,["loading","onClick"])])])]),table_header:r(()=>[Oe,Ae,Ge,Ne,Ie,je,Ue]),table_body:r(()=>[(l(!0),p(g,null,f(b.fingerprints,s=>(l(),p("tr",{class:"py-2 text-center border-b-2 h-14",key:s.id},[e("td",null,c(s.user_name),1),e("td",null,c(s.code),1),e("td",null,c(s.type),1),e("td",null,c(s.start),1),e("td",null,c(s.end),1),e("td",null,c(s.state),1),e("td",{class:"cursor-pointer hover:underline",onClick:k=>i.showTaskFunction(s.id)}," عرض ",8,Ke)]))),128))]),_:1})],64)}const qe=M(Y,[["render",Re]]),ze={components:{AppLayout:D,Icon:V,Loading:K,Task:qe},layout:D,props:{fingerprints:Array}},Je={class:"flex items-center justify-between w-full h-full"},Pe={class:"w-full h-full p-1 px-2 overflow-auto"};function Qe(n,o,b,C,t,i){const y=a("Task");return l(),p("div",Je,[e("div",Pe,[d(y,{fingerprints:b.fingerprints},null,8,["fingerprints"])])])}const nt=M(ze,[["render",Qe]]);export{nt as default};
