import{A as F}from"./AppLayout-e055a3fb.js";import{_ as M,I as B}from"./_plugin-vue_export-helper-d97591f4.js";import{_ as O,F as H,D as j,S as U,L as z}from"./FormDropDown-d545c5d5.js";import{T as G,O as I,k as v,r as d,o as l,c as i,b as m,f as r,g as c,a as e,n as E,h as K,w as _,p as k,t as p,F as f,l as b,d as D,e as u,i as C}from"./app-65af30ef.js";import{_ as R}from"./BlueButton-a8ab83bf.js";import{a as q,D as J}from"./DropdownList-9b3ede74.js";import{F as P}from"./Filter-7e2e6f35.js";const Q={components:{TableCard:O,Icon:B,BlueButton:R,DropdownList:q,DropDownOption:J,FormDropDown:H,DangerButton:j,SecondaryButton:U,Filter:P},props:{fingerprints:Array,filter:Object},created(){this.getEmployees()},data(){return{showAddNew:!1,employees:[],currentEmp:"",fingerprintMovement:[{id:1,name:"تكليف بصمة دخول"},{id:2,name:"تكليف بصمة خروج"},{id:3,name:"احتساب دخول بدون جزاء"},{id:4,name:"احتساب خروج بدون جزاء"},{id:5,name:"خصم يوم جزاء"},{id:6,name:"خصم يومين جزاء"},{id:7,name:"خصم ثلاثة جزاء"}],newEmpFingerprint:G({employee:"",movement:null,login:"",exit:"",type:"employee",shift_id:""}),shifts:[],showFilter:!1,loadingClearFilter:!1,filterKeys:["group"],filterData:this.filter}},methods:{clearFilter(){this.loadingClearFilter=!0,I.get("/migration",{},{onSuccess:()=>{this.loadingClearFilter=!1,this.filterData=[]}})},getEmployees(){v.get("/get-employees").then(o=>{this.employees=o.data}).catch(o=>console.log(o))},selectFun(o){this.currentEmp=o.name,this.newEmpFingerprint.employee=o.id,this.getShiftByGroupOrEmployee(o.id)},submit(){this.newEmpFingerprint.post("/add-new-fingerprint",{onSuccess:()=>{this.showAddNew=!1,this.toast("","تم اظافة الحركة بنجاح","success"),this.newEmpFingerprint.reset()}})},async getShiftByGroupOrEmployee(o){await v.get("/get-shift?id="+o+"&type="+this.newEmpFingerprint.type).then(n=>{this.shifts=n.data})}}},W={class:"relative w-full h-full"},X=e("div",{class:"flex items-center jusc"},[e("div",{class:"px-4 py-2 mt-2 mb-4 text-xl font-semibold text-center w-max"}," اظافة حركة ")],-1),Y={class:"grid w-full grid-cols-1 gap-2 mb-4"},Z=e("span",{class:"block mb-4 mr-4 text-sm font-semibold"},"نوع الاجازة",-1),$={class:"flex items-center justify-center"},ee={class:"flex items-center px-4"},te=e("span",{class:"mr-2"}," موظف محدد ",-1),se={class:"flex items-center px-4 mt-2"},ne=e("span",{class:"mr-2"},"كل الموظف",-1),oe={class:"grid grid-cols-2 gap-2 w-max"},re={key:0,class:"block w-full mb-4"},le=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"اسم الموظف",-1),ie={class:"px-2 border rounded-md"},pe={class:"px-1"},me=["innerHTML"],de={class:"block w-full mb-4"},ae=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"الحركة",-1),ce={class:"px-2 border rounded-md"},ue={class:"px-1"},_e=["innerHTML"],fe={class:"block w-full mb-4"},ge=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"من",-1),he={class:"flex items-center px-4 border rounded-md"},be=["innerHTML"],we={class:"block w-full mb-4"},ye=e("span",{class:"block mb-1 mr-4 text-sm font-semibold"},"الى",-1),xe={class:"flex items-center px-4 border rounded-md"},Fe=["min"],ve=["innerHTML"],Ee={class:"flex items-center justify-between py-2"},ke={class:"flex items-center justify-between w-full"},De=e("p",{class:"text-xl font-semibold"},"عرض البصمات",-1),Ce={class:"grid grid-cols-3 gap-2"},Me={key:0},Be=e("th",null,"الاسم",-1),Le=e("th",{class:"py-2"},"اسم المجموعة",-1),Te=e("th",null,"اليوم",-1),Ae=e("th",null,"اسم الوردية",-1),Ne=e("th",null,"وقت الدخول",-1),Se=e("th",null,"وقت الخروج",-1),Ve=e("th",null,"رقم الجهاز",-1);function Oe(o,n,g,L,t,a){const h=d("Filter"),w=d("DropDownOption"),y=d("DropdownList"),T=d("FormDropDown"),x=d("BlueButton"),A=d("secondary-button"),N=d("danger-button"),S=d("TableCard");return l(),i(f,null,[m(h,{show:t.showFilter,filter:t.filterData,hide:o.hideFilter,url:"/migration",success:o.filterSuccess,only:t.filterKeys},{header:r(()=>[c(" فلتر الموظف ")]),_:1},8,["show","filter","hide","success","only"]),e("div",{class:E(["absolute top-0 right-0 w-full h-full transition-all duration-300 ease-linear cursor-pointer",t.showAddNew?"z-50":"-z-50"])},[e("div",W,[e("div",{class:"absolute w-full h-full bg-gray-200 opacity-75",onClick:n[0]||(n[0]=s=>t.showAddNew=!1)}),e("div",{class:E(["absolute transition-all duration-500 -translate-y-1/2 bg-white border shadow-lg w-max top-1/2 left-1/2 h-max rounded-xl",t.showAddNew?"-translate-x-1/2 ":"-translate-x-full "])},[X,e("form",{onSubmit:n[7]||(n[7]=K((...s)=>a.submit&&a.submit(...s),["prevent"])),class:"px-4"},[e("div",Y,[Z,e("div",$,[e("label",ee,[_(e("input",{type:"radio",value:"employee",name:"type","onUpdate:modelValue":n[1]||(n[1]=s=>t.newEmpFingerprint.type=s),class:"pr-1 text-sm bg-transparent border focus:ring-0"},null,512),[[k,t.newEmpFingerprint.type]]),te]),e("label",se,[_(e("input",{onChange:n[2]||(n[2]=s=>a.getShiftByGroupOrEmployee(0)),type:"radio",value:"all",name:"type","onUpdate:modelValue":n[3]||(n[3]=s=>t.newEmpFingerprint.type=s),class:"pr-1 text-sm bg-transparent border focus:ring-0 text-primary"},null,544),[[k,t.newEmpFingerprint.type]]),ne])])]),e("div",oe,[t.newEmpFingerprint.type=="employee"?(l(),i("label",re,[le,e("div",ie,[m(y,null,{button:r(()=>[e("div",pe,p(t.currentEmp),1)]),items:r(()=>[(l(!0),i(f,null,b(t.employees,s=>(l(),D(w,{class:"hover:bg-blue-500",key:s.id,select:V=>a.selectFun(s)},{default:r(()=>[c(p(s.name),1)]),_:2},1032,["select"]))),128))]),_:1})]),t.newEmpFingerprint.errors.employee!=null?(l(),i("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.employee},null,8,me)):u("",!0)])):u("",!0),e("label",de,[ae,e("div",ce,[m(y,null,{button:r(()=>{var s;return[e("div",ue,p((s=t.newEmpFingerprint)==null?void 0:s.movement),1)]}),items:r(()=>[(l(!0),i(f,null,b(t.fingerprintMovement,s=>(l(),D(w,{class:"hover:bg-blue-500",key:s.id,select:V=>{t.newEmpFingerprint.movement=s.name}},{default:r(()=>[c(p(s.name),1)]),_:2},1032,["select"]))),128))]),_:1})]),t.newEmpFingerprint.errors.movement!=null?(l(),i("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.movement},null,8,_e)):u("",!0)]),e("label",fe,[ge,e("div",he,[_(e("input",{type:"date","onUpdate:modelValue":n[4]||(n[4]=s=>t.newEmpFingerprint.login=s),class:"pr-1 text-sm bg-transparent border-0 focus:ring-0"},null,512),[[C,t.newEmpFingerprint.login]])]),t.newEmpFingerprint.errors.login!=null?(l(),i("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.login},null,8,be)):u("",!0)]),e("label",we,[ye,e("div",xe,[_(e("input",{type:"date","onUpdate:modelValue":n[5]||(n[5]=s=>t.newEmpFingerprint.exit=s),min:t.newEmpFingerprint.login,class:"pr-1 text-sm bg-transparent border-0 focus:ring-0"},null,8,Fe),[[C,t.newEmpFingerprint.exit]])]),t.newEmpFingerprint.errors.exit!=null?(l(),i("small",{key:0,class:"mt-1 mr-4 text-xs font-semibold text-red-800",innerHTML:t.newEmpFingerprint.errors.exit},null,8,ve)):u("",!0)])]),m(T,{label:"الدوام",modelValue:t.newEmpFingerprint.shift_id,error:t.newEmpFingerprint.errors.shift_id,selectData:t.shifts,selectFun:s=>t.newEmpFingerprint.shift_id=s},null,8,["modelValue","error","selectData","selectFun"]),e("div",Ee,[m(x,{type:"submit"},{default:r(()=>[c(" حفظ ")]),_:1}),e("button",{type:"reset",onClick:n[6]||(n[6]=s=>t.showAddNew=!1),class:"w-full py-2 mx-2 text-sm font-semibold text-white bg-red-500 rounded-full"}," الغاء ")])],32)],2)])],2),m(S,null,{header:r(()=>[e("div",ke,[De,e("div",Ce,[m(A,{onClick:n[8]||(n[8]=s=>t.showFilter=!0)},{default:r(()=>[c(" فلتر ")]),_:1}),m(N,{loading:t.loadingClearFilter,onClick:a.clearFilter},{default:r(()=>[c(" تصفية الفلتر ")]),_:1},8,["loading","onClick"]),t.employees.length&&o.$page.props.role!="employee"?(l(),i("div",Me,[m(x,{onClick:n[9]||(n[9]=s=>{t.showAddNew=!0,a.getEmployees()}),class:"px-4 py-1"},{default:r(()=>[c(" اظافة حركة ")]),_:1})])):u("",!0)])])]),table_header:r(()=>[Be,Le,Te,Ae,Ne,Se,Ve]),table_body:r(()=>[(l(!0),i(f,null,b(g.fingerprints,s=>(l(),i("tr",{class:"py-2 text-center border-b-2 h-14",key:s.id},[e("td",null,p(s.user_name),1),e("td",null,p(s.group_name),1),e("td",null,p(s.day),1),e("td",null,p(s.shift_name),1),e("td",null,p(s.enter_time),1),e("td",null,p(s.exit_time),1),e("td",null,p(s.device_number),1)]))),128))]),_:1})],64)}const He=M(Q,[["render",Oe]]),je={components:{AppLayout:F,Icon:B,Loading:z,Migration:He},layout:F,props:{fingerprints:Array}},Ue={class:"w-full h-full flex items-center justify-between"},ze={class:"w-full h-full p-1 px-2 overflow-auto bg-gray-200"};function Ge(o,n,g,L,t,a){const h=d("Migration");return l(),i("div",Ue,[e("div",ze,[m(h,{fingerprints:g.fingerprints},null,8,["fingerprints"])])])}const We=M(je,[["render",Ge]]);export{We as default};
